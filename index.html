<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>เว็บข่าวฟุตบอลสด + ตารางแข่ง + ทีเด็ดวันนี้</title>
<style>
  /* ... (ใช้ CSS เดิมเหมือนที่คุณมี) ... */
</style>
</head>
<body>

<header>ข่าวฟุตบอลสด ตารางแข่ง ทีเด็ดวันนี้</header>

<main>
  <section id="section-matches">
    <h2>ตารางแข่งขันวันนี้ (ตามเวลาประเทศไทย)</h2>
    <table id="match-table">
      <thead>
        <tr>
          <th>ลีก</th>
          <th>เวลา</th>
          <th>คู่แข่งขัน</th>
          <th>สถานะ</th>
        </tr>
      </thead>
      <tbody>
        <tr><td colspan="4">กำลังโหลดข้อมูล...</td></tr>
      </tbody>
    </table>
  </section>

  <section id="section-news">
    <h2>ข่าวฟุตบอลล่าสุด (จาก siamsport)</h2>
    <ul id="news-list">
      <li><a href="https://www.siamsport.co.th/football/thailand-football/1304561" target="_blank" rel="noopener noreferrer">ข่าวที่ 1: ลิเวอร์พูลได้แชมป์พรีเมียร์ลีก</a></li>
      <li><a href="https://www.siamsport.co.th/football/thailand-football/1304570" target="_blank" rel="noopener noreferrer">ข่าวที่ 2: แมนยูเตรียมเสริมทัพใหม่</a></li>
      <li><a href="https://www.siamsport.co.th/football/thailand-football/1304580" target="_blank" rel="noopener noreferrer">ข่าวที่ 3: บาร์เซโลนาเตรียมเปิดตัวนักเตะใหม่</a></li>
      <!-- ใส่ลิงก์ข่าวเพิ่มตามต้องการ -->
    </ul>
  </section>

  <section id="section-tip">
    <h2>ทีเด็ดวันนี้</h2>
    <div id="tip-today">
    ⚽️ ลิเวอร์พูล ฟอร์มดี ชนะต่อเนื่อง! แนะนำเชียร์ลิเวอร์พูลในวันนี้! ⚽️
    </div>
  </section>
</main>

<script>
  // ======= ตัวแปร API KEY =======
  const THESPORTSDB_API_KEY = '1'; // ใช้ '1' ฟรีเดโม

  // ======= ฟังก์ชันดึงตารางแข่งขันวันนี้จาก TheSportsDB =======
  async function fetchMatches() {
    const date = new Date().toISOString().slice(0,10); // yyyy-mm-dd
    const url = `https://www.thesportsdb.com/api/v1/json/${THESPORTSDB_API_KEY}/eventsday.php?d=${date}&s=Soccer`;

    try {
      const res = await fetch(url);
      const data = await res.json();
      const tbody = document.querySelector('#match-table tbody');
      tbody.innerHTML = '';

      if(!data.events) {
        tbody.innerHTML = '<tr><td colspan="4">ไม่มีแมตช์ในวันนี้</td></tr>';
        return;
      }

      data.events.forEach(event => {
        // แปลงเวลา UTC+0 เป็นเวลาไทย (UTC+7)
        const utcTime = event.strTime; // "15:00:00"
        const utcDateStr = event.dateEvent + 'T' + utcTime + 'Z'; // ISO format
        const utcDate = new Date(utcDateStr);
        const thailandOffset = 7 * 60; // 7 ชั่วโมงในนาที
        const thailandTime = new Date(utcDate.getTime() + thailandOffset * 60000);
        const hours = thailandTime.getHours().toString().padStart(2, '0');
        const minutes = thailandTime.getMinutes().toString().padStart(2, '0');
        const timeTH = `${hours}:${minutes}`;

        let status = event.strStatus || (event.intHomeScore === null ? 'ยังไม่แข่ง' : 'กำลังแข่ง');

        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${event.strLeague}</td>
          <td>${timeTH}</td>
          <td>${event.strHomeTeam} vs ${event.strAwayTeam}</td>
          <td>${status}</td>
        `;
        tbody.appendChild(tr);
      });
    } catch (error) {
      console.error('Error fetching matches:', error);
      const tbody = document.querySelector('#match-table tbody');
      tbody.innerHTML = '<tr><td colspan="4">เกิดข้อผิดพลาดในการโหลดข้อมูล</td></tr>';
    }
  }

  window.addEventListener('DOMContentLoaded', () => {
    fetchMatches();
  });
</script>

</body>
</html>
