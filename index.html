<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>เว็บข่าวฟุตบอลสด + ตารางแข่ง + ทีเด็ดวันนี้</title>
<style>
  body {
    font-family: 'Roboto', sans-serif;
    background: #061622 url('https://images.unsplash.com/photo-1508609349937-5ec4ae374ebf?ixlib=rb-4.0.3&auto=format&fit=crop&w=1470&q=80') no-repeat center/cover;
    color: white;
    margin: 0; padding: 0;
  }
  header {
    background: rgba(0, 51, 102, 0.85);
    padding: 20px;
    text-align: center;
    font-size: 2rem;
    font-weight: 700;
    letter-spacing: 1.2px;
    color: #f4b41a;
    box-shadow: 0 3px 6px rgba(0,0,0,0.5);
  }
  main {
    max-width: 1100px;
    margin: 20px auto;
    padding: 0 15px;
  }
  section {
    background: rgba(0,0,0,0.6);
    border-radius: 10px;
    margin-bottom: 25px;
    padding: 15px 20px;
  }
  h2 {
    color: #f4b41a;
    margin-bottom: 15px;
    border-bottom: 2px solid #f4b41a;
    padding-bottom: 5px;
  }
  /* ตารางแข่ง */
  #match-table {
    width: 100%;
    border-collapse: collapse;
  }
  #match-table th, #match-table td {
    border: 1px solid #f4b41a;
    padding: 8px 12px;
    text-align: center;
  }
  #match-table th {
    background: #0a3d62;
  }
  #match-table tr:hover {
    background: rgba(244, 180, 26, 0.3);
    cursor: pointer;
  }
  /* ข่าว */
  #news-list {
    list-style: none;
    padding: 0;
    max-height: 400px;
    overflow-y: auto;
  }
  #news-list li {
    margin-bottom: 12px;
    padding-bottom: 8px;
    border-bottom: 1px solid #f4b41a;
  }
  #news-list li a {
    color: #f4b41a;
    text-decoration: none;
    font-weight: 600;
    transition: color 0.3s;
  }
  #news-list li a:hover {
    color: #ffffff;
    text-decoration: underline;
  }
  /* ทีเด็ดวันนี้ */
  #tip-today {
    background: #f4b41a;
    color: #061622;
    padding: 15px 20px;
    border-radius: 10px;
    font-size: 1.2rem;
    font-weight: 700;
  }
  /* Responsive */
  @media (max-width: 768px) {
    #match-table th, #match-table td {
      font-size: 0.85rem;
      padding: 6px 8px;
    }
    #tip-today {
      font-size: 1rem;
    }
  }
</style>
</head>
<body>

<header>ข่าวฟุตบอลสด ตารางแข่ง ทีเด็ดวันนี้</header>

<main>
  <section id="section-matches">
    <h2>ตารางแข่งขันวันนี้ (ตามเวลาประเทศไทย)</h2>
    <table id="match-table">
      <thead>
        <tr>
          <th>ลีก</th>
          <th>เวลา</th>
          <th>คู่แข่งขัน</th>
          <th>สถานะ</th>
        </tr>
      </thead>
      <tbody>
        <tr><td colspan="4">กำลังโหลดข้อมูล...</td></tr>
      </tbody>
    </table>
  </section>

  <section id="section-news">
    <h2>ข่าวฟุตบอลล่าสุดจาก siamsport</h2>
    <ul id="news-list">
      <li>กำลังโหลดข่าว...</li>
    </ul>
  </section>

  <section id="section-tip">
    <h2>ทีเด็ดวันนี้</h2>
    <div id="tip-today">
    ⚽️ ลิเวอร์พูล ฟอร์มดี ชนะต่อเนื่อง! แนะนำเชียร์ลิเวอร์พูลในวันนี้! ⚽️
    </div>
  </section>
</main>

<script>
  // ======= ตัวแปร API KEY =======
  const THESPORTSDB_API_KEY = '1'; // ใช้ '1' เป็น key ฟรีเดโมได้เลย (แต่ข้อมูลจำกัด)

  // ======= ฟังก์ชันดึงตารางแข่งขันวันนี้จาก TheSportsDB =======
  async function fetchMatches() {
    const date = new Date().toISOString().slice(0,10); // yyyy-mm-dd
    const url = `https://www.thesportsdb.com/api/v1/json/${THESPORTSDB_API_KEY}/eventsday.php?d=${date}&s=Soccer`;

    try {
      const res = await fetch(url);
      const data = await res.json();
      const tbody = document.querySelector('#match-table tbody');
      tbody.innerHTML = '';

      if(!data.events) {
        tbody.innerHTML = '<tr><td colspan="4">ไม่มีแมตช์ในวันนี้</td></tr>';
        return;
      }

      data.events.forEach(event => {
        // แปลงเวลา UTC+0 เป็นเวลาไทย (UTC+7)
        const utcTime = event.strTime; // "15:00:00"
        const utcDateStr = event.dateEvent + 'T' + utcTime + 'Z'; // ISO format
        const utcDate = new Date(utcDateStr);
        const thailandOffset = 7 * 60; // 7 ชั่วโมงในนาที
        const thailandTime = new Date(utcDate.getTime() + thailandOffset * 60000);
        const hours = thailandTime.getHours().toString().padStart(2, '0');
        const minutes = thailandTime.getMinutes().toString().padStart(2, '0');
        const timeTH = `${hours}:${minutes}`;

        // สถานะ
        let status = event.strStatus || (event.intHomeScore === null ? 'ยังไม่แข่ง' : 'กำลังแข่ง');

        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${event.strLeague}</td>
          <td>${timeTH}</td>
          <td>${event.strHomeTeam} vs ${event.strAwayTeam}</td>
          <td>${status}</td>
        `;
        tbody.appendChild(tr);
      });
    } catch (error) {
      console.error('Error fetching matches:', error);
      const tbody = document.querySelector('#match-table tbody');
      tbody.innerHTML = '<tr><td colspan="4">เกิดข้อผิดพลาดในการโหลดข้อมูล</td></tr>';
    }
  }

  // ======= ฟังก์ชันดึงข่าวฟุตบอลจาก siamsport RSS =======
  async function fetchSiamSportNews() {
    const rssUrl = 'https://www.siamsport.co.th/rss/';
    const apiUrl = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(rssUrl)}`;
    const newsList = document.getElementById('news-list');
    newsList.innerHTML = '<li>กำลังโหลดข่าว...</li>';

    try {
      const res = await fetch(apiUrl);
      const data = await res.json();

      if (!data.items || data.items.length === 0) {
        newsList.innerHTML = '<li>ไม่พบข่าวจาก siamsport</li>';
        return;
      }

      newsList.innerHTML = '';

      data.items.slice(0, 10).forEach(item => {
        const li = document.createElement('li');
        li.innerHTML = `<a href="${item.link}" target="_blank" rel="noopener noreferrer">${item.title}</a>`;
        newsList.appendChild(li);
      });

    } catch (error) {
      console.error('Error fetching siamsport news:', error);
      newsList.innerHTML = '<li>เกิดข้อผิดพลาดในการโหลดข่าว</li>';
    }
  }

  // ======= โหลดข้อมูลเมื่อเปิดหน้าเว็บ =======
  window.addEventListener('DOMContentLoaded', () => {
    fetchMatches();
    fetchSiamSportNews();
  });
</script>

</body>
</html>
